<!DOCTYPE html><html lang="en"><head><meta name="x-poe-datastore-behavior" content="local_only"><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
<meta charset="UTF-8">
<title>Lions Gate Secure Credential Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&amp;family=IBM+Plex+Mono:wght@400;600&amp;family=Manrope:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
:root {
  --gold: #c9a24d;
  --gold-light: #e8d5a3;
  --gold-dark: #8a6d2f;
  --black: #0b0b0d;
  --gray: #1a1a1f;
  --gray-light: #2a2a32;
  --line: #2a2a30;
  --text: #eaeaea;
  --text-muted: #8a8a95;
  --success: #4ade80;
  --success-bg: rgba(74, 222, 128, 0.1);
  --error: #ff6b6b;
  --error-bg: rgba(255, 107, 107, 0.1);
  --bg-gradient: linear-gradient(180deg, #050507, #0e0e12);
  --card-bg: linear-gradient(180deg, #0f1016, #07070a);
  --card-border: #2a2a30;
}

.light {
  --black: #fafafa;
  --gray: #ffffff;
  --gray-light: #f0f0f5;
  --line: #e0e0e5;
  --text: #1a1a1f;
  --text-muted: #6a6a75;
  --bg-gradient: linear-gradient(180deg, #f5f5f7, #e8e8ed);
  --card-bg: linear-gradient(180deg, #ffffff, #f8f8fa);
  --card-border: #d0d0d8;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: "Manrope", system-ui, sans-serif;
  background: var(--bg-gradient);
  color: var(--text);
  min-height: 100vh;
  transition: background 0.4s ease, color 0.3s ease;
}

.hidden { display: none !important; }

/* Animations */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes holo {
  0% { background-position: 0% 50%; }
  100% { background-position: 300% 50%; }
}

@keyframes float {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-8px) rotate(1deg); }
}

@keyframes scanline {
  0% { top: -100%; }
  100% { top: 100%; }
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 40px 20px;
}

.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 18px;
  padding: 32px;
  box-shadow: 0 30px 80px rgba(0,0,0,.4);
  animation: fadeIn 0.6s ease-out backwards;
  transition: background 0.3s ease, border-color 0.3s ease;
}

.card:nth-child(2) { animation-delay: 0.1s; }
.card:nth-child(3) { animation-delay: 0.2s; }
.card:nth-child(4) { animation-delay: 0.3s; }

h1, h2, h3 {
  font-family: "Bebas Neue", sans-serif;
  letter-spacing: 1.5px;
  margin: 0 0 12px;
}

h1 {
  font-size: 2.8rem;
  background: linear-gradient(135deg, var(--gold), var(--gold-light));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

h2 { font-size: 1.8rem; }
h3 { font-size: 1.4rem; color: var(--gold); }

small { color: var(--text-muted); }
hr {
  border: none;
  border-top: 1px solid var(--line);
  margin: 28px 0;
}

/* LOGIN SCREEN */
#login {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}

#login::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle at 30% 30%, rgba(201, 162, 77, 0.08) 0%, transparent 50%),
              radial-gradient(circle at 70% 70%, rgba(201, 162, 77, 0.05) 0%, transparent 40%);
  animation: pulse 8s ease-in-out infinite;
}

.login-card {
  width: 400px;
  max-width: 90vw;
  position: relative;
  z-index: 1;
}

.login-card .logo {
  width: 80px;
  height: 80px;
  margin: 0 auto 20px;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  color: #000;
  box-shadow: 0 10px 40px rgba(201, 162, 77, 0.3);
}

.login-card h2 {
  text-align: center;
  font-size: 2rem;
}

.login-card small {
  display: block;
  text-align: center;
}

.input-group {
  position: relative;
  margin-top: 24px;
}

.input-group i {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
}

input {
  width: 100%;
  padding: 16px 16px 16px 48px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: var(--black);
  color: var(--text);
  font-size: 16px;
  font-family: "IBM Plex Mono", monospace;
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
}

input:focus {
  outline: none;
  border-color: var(--gold);
  box-shadow: 0 0 0 3px rgba(201, 162, 77, 0.2);
}

input::placeholder {
  color: var(--text-muted);
  font-family: "Manrope", sans-serif;
}

.btn {
  width: 100%;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  color: #000;
  font-weight: 700;
  font-size: 15px;
  letter-spacing: 0.5px;
  border: none;
  padding: 16px;
  border-radius: 12px;
  cursor: pointer;
  margin-top: 16px;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  font-family: "Manrope", sans-serif;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(201, 162, 77, 0.4);
}

.btn:active {
  transform: translateY(0);
}

.btn-secondary {
  background: transparent;
  border: 1px solid var(--line);
  color: var(--text);
  display: inline-flex;
  align-items: center;
  gap: 10px;
  width: auto;
  padding: 12px 20px;
  margin: 6px 6px 6px 0;
}

.btn-secondary:hover {
  border-color: var(--gold);
  background: rgba(201, 162, 77, 0.1);
}

.btn-secondary i {
  color: var(--gold);
}

.error {
  color: var(--error);
  background: var(--error-bg);
  padding: 12px 16px;
  border-radius: 10px;
  margin-top: 16px;
  text-align: center;
  font-size: 14px;
}

/* HEADER */
.header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  flex-wrap: wrap;
  gap: 20px;
}

.header-actions {
  display: flex;
  gap: 10px;
}

.icon-btn {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  border: 1px solid var(--line);
  background: var(--gray);
  color: var(--text);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.icon-btn:hover {
  border-color: var(--gold);
  color: var(--gold);
}

/* PROFILE */
.profile-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin-top: 20px;
}

.profile-item {
  padding: 16px;
  background: rgba(255,255,255,0.02);
  border-radius: 12px;
  border: 1px solid var(--line);
}

.light .profile-item {
  background: rgba(0,0,0,0.02);
}

.profile-item label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
  display: block;
  margin-bottom: 6px;
}

.profile-item span {
  font-family: "IBM Plex Mono", monospace;
  font-size: 15px;
  font-weight: 600;
}

/* STATUS BADGES */
.status {
  padding: 8px 16px;
  border-radius: 999px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  font-weight: 600;
}

.status i {
  font-size: 10px;
}

.inactive {
  background: var(--error-bg);
  color: var(--error);
  border: 1px solid rgba(255, 107, 107, 0.3);
}

.active {
  background: var(--success-bg);
  color: var(--success);
  border: 1px solid rgba(74, 222, 128, 0.3);
}

/* CREDENTIAL BADGES */
.badge-wrap {
  display: flex;
  gap: 30px;
  flex-wrap: wrap;
  margin-top: 24px;
}

.badge {
  width: 380px;
  max-width: 100%;
  aspect-ratio: 1.586/1;
  background: linear-gradient(145deg, #18191f, #0a0a0d);
  border-radius: 20px;
  border: 1px solid var(--line);
  padding: 0;
  position: relative;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  animation: float 6s ease-in-out infinite;
}

.light .badge {
  background: linear-gradient(145deg, #f8f8fa, #e8e8ed);
  box-shadow: 0 20px 60px rgba(0,0,0,0.15);
}

.badge:nth-child(2) {
  animation-delay: -3s;
}

.badge-inner {
  padding: 24px;
  height: 100%;
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 2;
}

/* Holographic strip */
.holo {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: linear-gradient(90deg,
    #ff0080, #ff8c00, #40e0d0, #ff0080,
    #ffd700, #00ff88, #ff0080);
  background-size: 300% 100%;
  animation: holo 3s linear infinite;
}

/* Scanline effect */
.badge::after {
  content: '';
  position: absolute;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(180deg, transparent, rgba(255,255,255,0.03), transparent);
  animation: scanline 4s linear infinite;
  pointer-events: none;
}

/* Holographic overlay */
.holo-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    transparent 0%,
    rgba(255, 255, 255, 0.03) 40%,
    rgba(255, 255, 255, 0.08) 50%,
    rgba(255, 255, 255, 0.03) 60%,
    transparent 100%
  );
  background-size: 200% 200%;
  animation: shimmer 3s ease-in-out infinite;
  pointer-events: none;
}

.badge-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.badge-logo {
  font-family: "Bebas Neue", sans-serif;
  font-size: 12px;
  letter-spacing: 3px;
  color: var(--gold);
  opacity: 0.9;
}

.badge-chip {
  width: 40px;
  height: 32px;
  background: linear-gradient(135deg, #d4af37, #b8960c);
  border-radius: 6px;
  position: relative;
  overflow: hidden;
}

.badge-chip::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 4px;
  right: 4px;
  height: 1px;
  background: rgba(0,0,0,0.3);
}

.badge-chip::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 4px;
  bottom: 4px;
  width: 1px;
  background: rgba(0,0,0,0.3);
}

.badge-title {
  font-family: "Bebas Neue", sans-serif;
  font-size: 28px;
  letter-spacing: 2px;
  color: var(--gold);
  margin: 12px 0 4px;
}

.badge-name {
  font-size: 18px;
  font-weight: 600;
  margin-bottom: auto;
}

.badge-footer {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-top: auto;
}

.badge-id {
  font-family: "IBM Plex Mono", monospace;
}

.badge-id label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: var(--text-muted);
  display: block;
  margin-bottom: 2px;
}

.badge-id span {
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 2px;
}

.qr-container {
  width: 70px;
  height: 70px;
  background: #fff;
  border-radius: 8px;
  padding: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.qr-container img {
  width: 100%;
  height: 100%;
}

/* Badge Back */
.badge.back {
  animation-delay: -3s;
}

.badge.back .badge-inner {
  justify-content: space-between;
}

.badge-meta {
  margin-top: 16px;
}

.badge-meta h4 {
  font-family: "Bebas Neue", sans-serif;
  font-size: 14px;
  letter-spacing: 2px;
  color: var(--gold);
  margin-bottom: 8px;
}

.badge-meta p {
  font-size: 10px;
  line-height: 1.6;
  color: var(--text-muted);
}

.barcode {
  height: 40px;
  display: flex;
  gap: 2px;
  align-items: stretch;
  margin-top: auto;
}

.barcode span {
  flex: 1;
  background: var(--text);
  max-width: 4px;
}

.barcode span:nth-child(even) {
  opacity: 0;
}

.barcode span:nth-child(3n) {
  max-width: 2px;
}

.badge-serial {
  font-family: "IBM Plex Mono", monospace;
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
  margin-top: 8px;
  letter-spacing: 2px;
}

/* DOCUMENTS */
.doc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

.doc-item {
  padding: 20px;
  background: rgba(255,255,255,0.02);
  border: 1px solid var(--line);
  border-radius: 14px;
  display: flex;
  align-items: center;
  gap: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.light .doc-item {
  background: rgba(0,0,0,0.02);
}

.doc-item:hover {
  border-color: var(--gold);
  background: rgba(201, 162, 77, 0.05);
  transform: translateY(-2px);
}

.doc-icon {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, var(--gold), var(--gold-dark));
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #000;
  font-size: 20px;
  flex-shrink: 0;
}

.doc-info h4 {
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 4px;
}

.doc-info span {
  font-size: 12px;
  color: var(--text-muted);
}

/* SPECS */
.specs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin-top: 20px;
}

.spec-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  background: rgba(255,255,255,0.02);
  border-radius: 10px;
  border: 1px solid var(--line);
}

.light .spec-item {
  background: rgba(0,0,0,0.02);
}

.spec-item i {
  color: var(--gold);
  font-size: 18px;
  width: 24px;
  text-align: center;
}

.spec-item span {
  font-size: 13px;
}

/* FOOTER */
footer {
  text-align: center;
  margin-top: 50px;
  padding: 30px;
  border-top: 1px solid var(--line);
  color: var(--text-muted);
  font-size: 12px;
}

footer .logo-text {
  font-family: "Bebas Neue", sans-serif;
  font-size: 16px;
  letter-spacing: 3px;
  color: var(--gold);
  margin-bottom: 8px;
}

/* Modal */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 20px;
  animation: fadeIn 0.2s ease;
}

.modal {
  background: var(--gray);
  border: 1px solid var(--line);
  border-radius: 18px;
  padding: 32px;
  max-width: 400px;
  width: 100%;
  text-align: center;
}

.modal i {
  font-size: 48px;
  color: var(--success);
  margin-bottom: 16px;
}

.modal h3 {
  margin-bottom: 8px;
}

.modal p {
  color: var(--text-muted);
  font-size: 14px;
  margin-bottom: 24px;
}

/* Responsive */
@media (max-width: 768px) {
  .container { padding: 24px 16px; }
  .card { padding: 24px 20px; }
  h1 { font-size: 2rem; }
  .badge { width: 100%; }
  .header { flex-direction: column; }
  .header-actions { width: 100%; justify-content: flex-end; }
}
</style>
</head>

<body>

<!-- LOGIN SCREEN -->
<div id="login">
  <div class="card login-card">
    <div class="logo">
      <i class="fas fa-shield-halved"></i>
    </div>
    <h2>LIONS GATE</h2>
    <small>Secure Credential Verification Portal</small>
    <hr>
    <div class="input-group">
      <i class="fas fa-id-badge"></i>
      <input id="tagInput" placeholder="Enter Tag ID" autocomplete="off" onkeypress="if(event.key==='Enter')login()">
    </div>
    <button class="btn" onclick="login()">
      <i class="fas fa-fingerprint"></i> Verify Credential
    </button>
    <div id="err" class="error hidden">
      <i class="fas fa-exclamation-triangle"></i> Invalid credential. Access denied.
    </div>
  </div>
</div>

<!-- PORTAL -->
<div id="portal" class="hidden">
  <div class="container">

    <!-- Header -->
    <div class="header">
      <div>
        <h1>MEMBER CREDENTIAL PORTAL</h1>
        <small>Secure Institutional Access Environment</small>
      </div>
      <div class="header-actions">
        <button class="icon-btn" onclick="toggleTheme()" title="Toggle Theme">
          <i class="fas fa-moon" id="themeIcon"></i>
        </button>
        <button class="icon-btn" onclick="logout()" title="Logout">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </div>

    <hr>

    <!-- Member Profile -->
    <div class="card">
      <h3><i class="fas fa-user-shield"></i> Member Profile</h3>
      <div class="profile-grid">
        <div class="profile-item">
          <label>Full Name</label>
          <span>Denise Trumbauer</span>
        </div>
        <div class="profile-item">
          <label>Membership Tier</label>
          <span style="color: var(--gold)">Elite Member (Provisional)</span>
        </div>
        <div class="profile-item">
          <label>Tag ID</label>
          <span>TG2603</span>
        </div>
        <div class="profile-item">
          <label>Status</label>
          <span class="status inactive" id="statusBadge">
            <i class="fas fa-circle"></i> Inactive – Pending
          </span>
        </div>
      </div>
      <hr>
      <small>
        <i class="fas fa-info-circle"></i>
        Access must be completed on or before <strong>16th</strong>.
        Physical credentials will be processed on <strong>17th</strong>.
      </small>
    </div>

    <hr>

    <!-- Digital Credential -->
    <div class="card">
      <h3><i class="fas fa-id-card"></i> Digital Credential</h3>
      <div class="badge-wrap">

        <!-- FRONT -->
        <div class="badge">
          <div class="holo"></div>
          <div class="holo-overlay"></div>
          <div class="badge-inner">
            <div class="badge-header">
              <div class="badge-logo">LIONS GATE</div>
              <div class="badge-chip"></div>
            </div>
            <div class="badge-title">ELITE ACCESS</div>
            <div class="badge-name">Denise Trumbauer</div>
            <div class="badge-footer">
              <div class="badge-id">
                <label>Tag ID</label>
                <span>TG2603</span>
              </div>
              <div class="qr-container" id="qrcode"></div>
            </div>
          </div>
        </div>

        <!-- BACK -->
        <div class="badge back">
          <div class="holo"></div>
          <div class="holo-overlay"></div>
          <div class="badge-inner">
            <div class="badge-logo">LIONS GATE CORPORATION</div>
            <div class="badge-meta">
              <h4>CREDENTIAL METADATA</h4>
              <p>
                This credential is system-issued, access-controlled,
                non-transferable and governed by Lions Gate internal
                security policy. Unauthorized duplication or use is strictly prohibited.
              </p>
            </div>
            <div>
              <div class="barcode" id="barcode"></div>
              <div class="badge-serial">LG-2603-ELITE-2024-PROV</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <hr>

    <!-- Documents -->
    <div class="card">
      <h3><i class="fas fa-folder-open"></i> Credential Documents</h3>
      <div class="doc-grid">
        <div class="doc-item" onclick="downloadDocument('issuance')">
          <div class="doc-icon"><i class="fas fa-file-signature"></i></div>
          <div class="doc-info">
            <h4>Credential Issuance Letter</h4>
            <span>Official membership confirmation</span>
          </div>
        </div>
        <div class="doc-item" onclick="downloadDocument('verification')">
          <div class="doc-icon"><i class="fas fa-certificate"></i></div>
          <div class="doc-info">
            <h4>Verification Certificate</h4>
            <span>Identity verification proof</span>
          </div>
        </div>
        <div class="doc-item" onclick="downloadDocument('expiration')">
          <div class="doc-icon"><i class="fas fa-calendar-xmark"></i></div>
          <div class="doc-info">
            <h4>Access Expiration Notice</h4>
            <span>Credential validity period</span>
          </div>
        </div>
      </div>
      <hr>
      <small>
        <i class="fas fa-truck"></i>
        Physical tag, Lions Gate membership ID card and branded materials
        will be dispatched via FedEx or DHL upon completion.
      </small>
    </div>

    <hr>

    <!-- Specifications -->
    <div class="card">
      <h3><i class="fas fa-microchip"></i> Physical Badge Specification</h3>
      <div class="specs-grid">
        <div class="spec-item">
          <i class="fas fa-ruler-combined"></i>
          <span>CR80 format – 85.60 × 53.98 mm</span>
        </div>
        <div class="spec-item">
          <i class="fas fa-print"></i>
          <span>300–600 DPI print resolution</span>
        </div>
        <div class="spec-item">
          <i class="fas fa-layer-group"></i>
          <span>Polycarbonate composite</span>
        </div>
        <div class="spec-item">
          <i class="fas fa-sparkles"></i>
          <span>Holographic security strip</span>
        </div>
        <div class="spec-item">
          <i class="fas fa-qrcode"></i>
          <span>QR + Code-128 fallback</span>
        </div>
        <div class="spec-item">
          <i class="fas fa-text-height"></i>
          <span>Microtext security elements</span>
        </div>
      </div>
    </div>

    <footer>
      <div class="logo-text">LIONS GATE CORPORATION</div>
      Secure Credential Infrastructure<br>
      System generated · No signature required
    </footer>
  </div>
</div>

<!-- Download Modal -->
<div id="downloadModal" class="modal-overlay hidden">
  <div class="modal">
    <i class="fas fa-check-circle"></i>
    <h3>Download Ready</h3>
    <p id="modalText">Your document is being downloaded.</p>
    <button class="btn" onclick="closeModal()">Close</button>
  </div>
</div>

<script>
// Theme detection and toggle
function initTheme() {
  if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
    document.documentElement.classList.add('light');
    updateThemeIcon();
  }
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
    if (event.matches) {
      document.documentElement.classList.remove('light');
    } else {
      document.documentElement.classList.add('light');
    }
    updateThemeIcon();
  });
}

function toggleTheme() {
  document.documentElement.classList.toggle('light');
  updateThemeIcon();
}

function updateThemeIcon() {
  const icon = document.getElementById('themeIcon');
  if (document.documentElement.classList.contains('light')) {
    icon.className = 'fas fa-sun';
  } else {
    icon.className = 'fas fa-moon';
  }
}

// Login functionality
function login() {
  const v = document.getElementById("tagInput").value.trim().toUpperCase();
  if (v === "TG2603") {
    document.getElementById("login").classList.add("hidden");
    document.getElementById("portal").classList.remove("hidden");
    generateQRCode();
    generateBarcode();
  } else {
    document.getElementById("err").classList.remove("hidden");
    document.getElementById("tagInput").style.borderColor = 'var(--error)';
    setTimeout(() => {
      document.getElementById("tagInput").style.borderColor = '';
    }, 2000);
  }
}

function logout() {
  document.getElementById("portal").classList.add("hidden");
  document.getElementById("login").classList.remove("hidden");
  document.getElementById("tagInput").value = '';
  document.getElementById("err").classList.add("hidden");
}

// Generate QR Code
function generateQRCode() {
  const qrContainer = document.getElementById("qrcode");
  qrContainer.innerHTML = '';
  new QRCode(qrContainer, {
    text: "LIONSGATE:TG2603:ELITE:TRUMBAUER:2024",
    width: 58,
    height: 58,
    colorDark: "#000000",
    colorLight: "#ffffff",
    correctLevel: QRCode.CorrectLevel.M
  });
}

// Generate Barcode
function generateBarcode() {
  const barcode = document.getElementById("barcode");
  barcode.innerHTML = '';
  const pattern = "1010110100101101010110010110101001011010101100101101010010110101";
  for (let i = 0; i < pattern.length; i++) {
    const bar = document.createElement("span");
    bar.style.opacity = pattern[i] === '1' ? '1' : '0';
    bar.style.width = (Math.random() > 0.7 ? '3' : '2') + 'px';
    barcode.appendChild(bar);
  }
}

// Document Downloads
function downloadDocument(type) {
  let content = '';
  let filename = '';

  const currentDate = new Date().toLocaleDateString('en-US', {
    year: 'numeric', month: 'long', day: 'numeric'
  });

  switch(type) {
    case 'issuance':
      filename = 'LionsGate_Credential_Issuance_Letter.txt';
      content = `
═══════════════════════════════════════════════════════════════
                    LIONS GATE CORPORATION
                  CREDENTIAL ISSUANCE LETTER
═══════════════════════════════════════════════════════════════

Document Reference: LG-ISS-2024-2603
Issue Date: ${currentDate}
Classification: CONFIDENTIAL

───────────────────────────────────────────────────────────────

RECIPIENT INFORMATION
─────────────────────
Name:            Denise Trumbauer
Tag ID:          TG2603
Membership Tier: Elite Member (Provisional)
Status:          Active - Pending Completion

───────────────────────────────────────────────────────────────

CREDENTIAL DETAILS
──────────────────
This letter confirms the issuance of secure access credentials
to the above-named individual under the Lions Gate Corporate
Membership Program.

The credential holder is granted provisional Elite Member status,
subject to completion of all required verification procedures.

ISSUED CREDENTIALS:
  • Digital Access Badge (DAB)
  • Secure Tag ID: TG2603
  • Portal Access Rights: Full
  • Physical Badge: Pending Dispatch

───────────────────────────────────────────────────────────────

TERMS AND CONDITIONS
────────────────────
1. This credential is non-transferable
2. Unauthorized use is strictly prohibited
3. Report any loss immediately to security
4. Credential validity subject to periodic review

───────────────────────────────────────────────────────────────

                    [SYSTEM GENERATED]
              No physical signature required

          Lions Gate Corporation Security Division
              Secure Credential Infrastructure
═══════════════════════════════════════════════════════════════
`;
      break;

    case 'verification':
      filename = 'LionsGate_Verification_Certificate.txt';
      content = `
═══════════════════════════════════════════════════════════════
                    LIONS GATE CORPORATION
                  VERIFICATION CERTIFICATE
═══════════════════════════════════════════════════════════════

Certificate Number: LG-VER-2024-2603-CERT
Verification Date: ${currentDate}
Valid Until: ${new Date(Date.now() + 365*24*60*60*1000).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}

───────────────────────────────────────────────────────────────

                  CERTIFICATE OF VERIFICATION

This is to certify that:

    ┌─────────────────────────────────────────────────────┐
    │                                                     │
    │            Name: DENISE TRUMBAUER                   │
    │            Tag ID: TG2603                           │
    │            Status: VERIFIED                         │
    │                                                     │
    └─────────────────────────────────────────────────────┘

Has been verified as a legitimate credential holder under
the Lions Gate Corporate Access Program.

───────────────────────────────────────────────────────────────

VERIFICATION DETAILS
────────────────────
Identity Verification:      ✓ COMPLETE
Background Check:           ✓ COMPLETE
Access Level Assignment:    ✓ COMPLETE
Digital Credential Issue:   ✓ COMPLETE
Physical Credential Issue:  ○ PENDING

Verification Hash: SHA-256
7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2b3c4d5e6f7a8b

───────────────────────────────────────────────────────────────

                    [DIGITALLY VERIFIED]

          Lions Gate Corporation Security Division
              Secure Credential Infrastructure
═══════════════════════════════════════════════════════════════
`;
      break;

    case 'expiration':
      filename = 'LionsGate_Access_Expiration_Notice.txt';
      content = `
═══════════════════════════════════════════════════════════════
                    LIONS GATE CORPORATION
                  ACCESS EXPIRATION NOTICE
═══════════════════════════════════════════════════════════════

Notice Reference: LG-EXP-2024-2603
Notice Date: ${currentDate}
Credential Holder: Denise Trumbauer
Tag ID: TG2603

───────────────────────────────────────────────────────────────

IMPORTANT: ACCESS VALIDITY INFORMATION
──────────────────────────────────────

Dear Credential Holder,

This notice provides information regarding the validity period
of your Lions Gate access credentials.

───────────────────────────────────────────────────────────────

CREDENTIAL TIMELINE
───────────────────

┌───���──────────────────────────────────────────────────────────┐
│  PHASE 1: PROVISIONAL ACCESS                                 │
│  ─────────────────────────────                               │
│  Start Date:  ${currentDate}                          │
│  Status:      ACTIVE                                         │
│                                                              │
│  PHASE 2: FULL MEMBER ACTIVATION                             │
│  ───────────────────────────────                             │
│  Target Date: Upon completion of verification                │
│  Status:      PENDING                                        │
│                                                              │
│  CREDENTIAL EXPIRATION                                       │
│  ─────────────────────                                       │
│  Expiry Date: ${new Date(Date.now() + 365*24*60*60*1000).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}                          │
│  Renewal:     Required 30 days before expiry                 │
└──────────────────────────────────────────────────────────────┘

───────────────────────────────────────────────────────────────

ACTION REQUIRED
───────────────
• Complete all pending verification steps before the 16th
• Physical credentials will be dispatched on the 17th
• Ensure contact information is up to date for delivery

───────────────────────────────────────────────────────────────

                    [AUTOMATED NOTICE]
              No response required at this time

          Lions Gate Corporation Security Division
              Secure Credential Infrastructure
═══════════════════════════════════════════════════════════════
`;
      break;
  }

  // Create and trigger download
  const blob = new Blob([content], { type: 'text/plain' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = filename;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);

  // Show modal
  document.getElementById('modalText').textContent = `${filename} has been downloaded.`;
  document.getElementById('downloadModal').classList.remove('hidden');
}

function closeModal() {
  document.getElementById('downloadModal').classList.add('hidden');
}

// Initialize
initTheme();
</script>





<!-- ================= TGX TAG ACCESS SYSTEM (ADDITIVE) ================= -->

<style>
#tgx-activation-overlay .modal,
#tgx-confirm-overlay .modal,
#tgx-progress-overlay .modal { max-width:420px; }

#tgx-progress-bar{
  height:6px;
  background:linear-gradient(90deg,#c9a24d,#e8d5a3);
  width:0%;
  border-radius:999px;
  margin-top:14px;
  transition:width .4s ease;
}

#tgx-admin-panel{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.9);
  z-index:5000;
  padding:40px;
  display:none;
}
</style>

<div id="tgx-activation-overlay" class="modal-overlay hidden">
  <div class="modal">
    <h3>Tag Credential Activation</h3>
    <p>Please enter your 6‑character activation code.</p>
    <input id="tgx-activation-code" maxlength="6" style="text-align:center">
    <div id="tgx-activation-error" class="error hidden">Invalid activation code.</div>
    <button class="btn" onclick="TGX.validateCode()">Continue</button>
  </div>
</div>

<div id="tgx-confirm-overlay" class="modal-overlay hidden">
  <div class="modal">
    <p><strong>Confirm activation of Tag Access Credentials?</strong></p>
    <label style="display:block;margin:12px 0;font-size:13px">
      <input type="checkbox" id="tgx-terms"> I accept the Terms & Conditions
    </label>
    <button class="btn" id="tgx-confirm-btn" disabled onclick="TGX.start()">Confirm</button>
    <button class="btn btn-secondary" onclick="TGX.reset()">Cancel</button>
  </div>
</div>

<div id="tgx-progress-overlay" class="modal-overlay hidden">
  <div class="modal">
    <h3>Activation In Progress</h3>
    <p>Please do not close this screen.</p>
    <div id="tgx-progress-bar"></div>
    <button class="btn btn-secondary" onclick="TGX.abort()">Cancel</button>
  </div>
</div>

<div id="tgx-post-activation" class="container hidden">
  <div class="card">
    <h3>Activation Summary</h3>
    <p>Status: <strong>Active</strong></p>
    <p>Authorization Level: <strong>Meet & Greet – Direct Access</strong></p>
    <p id="tgx-activated-at"></p>
  </div>
</div>

<div id="tgx-admin-panel">
  <div class="card">
    <h3>Administrative Control Panel</h3>
    <input id="tgx-admin-pass" placeholder="Administrator Password">
    <button class="btn" onclick="TGX.adminAuth()">Authenticate</button>
    <div id="tgx-admin-tools" class="hidden">
      <button class="btn btn-secondary" onclick="TGX.forceActivate()">Force Activate</button>
      <button class="btn btn-secondary" onclick="TGX.forceDeactivate()">Force Deactivate</button>
    </div>
  </div>
</div>

<script>
const TGX = (() => {
  const STORE='TGX_STATE';
  let clicks=0,timer;
  const qs=id=>document.getElementById(id);
  const save=s=>localStorage.setItem(STORE,JSON.stringify(s));
  const load=()=>JSON.parse(localStorage.getItem(STORE)||'{}');

  function init(){ const s=load(); if(s.active) activateUI(s.time); }

  function validateCode(){
    if(qs('tgx-activation-code').value.toUpperCase()!=='LGD26T'){
      qs('tgx-activation-error').classList.remove('hidden'); return;
    }
    qs('tgx-activation-overlay').classList.add('hidden');
    qs('tgx-confirm-overlay').classList.remove('hidden');
    qs('tgx-terms').onchange=e=>qs('tgx-confirm-btn').disabled=!e.target.checked;
  }

  function start(){
    qs('tgx-confirm-overlay').classList.add('hidden');
    qs('tgx-progress-overlay').classList.remove('hidden');
    let p=0;
    timer=setInterval(()=>{
      p+=Math.random()*20;
      qs('tgx-progress-bar').style.width=Math.min(p,100)+'%';
      if(p>=100) complete();
    },700);
  }

  function complete(){
    clearInterval(timer);
    const t=new Date().toLocaleString();
    save({active:true,time:t});
    qs('tgx-progress-overlay').classList.add('hidden');
    activateUI(t);
  }

  
function activateUI(t){
  // ENTERPRISE STATE ENFORCEMENT — ACTIVE ONLY

  // Remove any pending / warning / inactive UI remnants
  document.querySelectorAll(
    '.pending, .warning, .notice, .inactive, .pre-activation'
  ).forEach(el => el.remove());

  // Remove any legacy date-based instructions
  document.querySelectorAll('*').forEach(el => {
    if (el.textContent && /(16th|17th|before the|complete before)/i.test(el.textContent)) {
      el.remove();
    }
  });

  // Show activated account panel only
  const post = document.getElementById('tgx-post-activation');
  if (post) post.classList.remove('hidden');

  // Update activation timestamp
  const ts = document.getElementById('tgx-activated-at');
  if (ts) ts.textContent = 'Activated on ' + t;

  // Persist final ACTIVE state
  localStorage.setItem('TGX_STATE', JSON.stringify({
    active: true,
    time: t
  }));
}

  }

  function abort(){ clearInterval(timer); qs('tgx-progress-overlay').classList.add('hidden'); }
  function reset(){ qs('tgx-confirm-overlay').classList.add('hidden'); qs('tgx-activation-overlay').classList.remove('hidden'); }

  function adminAuth(){
    if(qs('tgx-admin-pass').value==='@Admin111')
      qs('tgx-admin-tools').classList.remove('hidden');
  }

  function forceActivate(){ save({active:true,time:new Date().toLocaleString()}); location.reload(); }
  function forceDeactivate(){ localStorage.removeItem(STORE); location.reload(); }

  document.querySelector('.logo')?.addEventListener('click',()=>{
    clicks++; if(clicks===4) qs('tgx-admin-panel').style.display='block';
    setTimeout(()=>clicks=0,800);
  });

  return {init,validateCode,start,abort,reset,adminAuth,forceActivate,forceDeactivate};
})();
TGX.init();
</script>

</body></html>